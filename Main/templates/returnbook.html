<HTML>

    <HEAD>
        <TITLE>Return book</TITLE>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="./../static/returnbook.css">
        <SCRIPT language="javascript">



            function addFields() {


                var container = document.getElementById("container");
                while (container.hasChildNodes()) {
                    container.removeChild(container.lastChild);
                }

                container.appendChild(document.createTextNode("Student ID "));
                var input1 = document.createElement("input");
                input1.id = "sid";

                input1.type = "number";
                input1.className = "dynamic-css";
                container.appendChild(input1);
                container.appendChild(document.createElement("br"));

                container.appendChild(document.createTextNode("Book Name"));
                var input2 = document.createElement("input");
                input2.id = "bname"
                input2.type = "text";
                input2.className = "dynamic-css";
                container.appendChild(input2);
                container.appendChild(document.createElement("br"));

                container.appendChild(document.createTextNode("Date of issue "));
                var input3 = document.createElement("input");
                input3.id="doi";
                input3.type = "date";
                input3.className = "dynamic-css";
                container.appendChild(input3);
                container.appendChild(document.createElement("br"));

                container.appendChild(document.createTextNode("Expected due date "));
                var input4 = document.createElement("input");
                input4.id = "edd";
                input4.type = "date";
                input4.className = "dynamic-css";
                container.appendChild(input4);
                container.appendChild(document.createElement("br"));

                container.appendChild(document.createTextNode("Late fees "));
                var input5 = document.createElement("input");
                input5.id = "lf"
                input5.type = "number";
                input5.className = "dynamic-css";
                container.appendChild(input5);
                container.appendChild(document.createElement("br"));

                var button = document.createElement('input');
                button.setAttribute('type', 'Submit');
                button.setAttribute('value', 'Submit');
                //button.setAttribute('onclick', 'btnSendMail_Click');
                document.body.appendChild(button);
                //container.appendChild(document.createElement("br"));
                button.setAttribute("class", "btn btn-dark");
                $('#button').addClass('dynamic-css');

                $.ajax({
            data : {
                rev: $('#bookId').val()
                   },
               type : 'POST',
               url : 'http://127.0.0.1:5000/returnb',
               success: function (response) {
//                var resp = JSON.parse(response)
                console.log(response);
                input1.value = response.sid;
                input2.value = response.bname;
                console.log(input3.value);
                input3.value = response.doi;
                input4.value = response.edd;
                input5.value = response.lf;


            },
              });

              console.log('Completed')

        event.preventDefault();
            }
        </SCRIPT>
    </HEAD>

    <BODY>
        <div class="row">
            <FORM class="myform">
                <H2>Form for returning books.</H2>

                <input type="number" id="bookId" name="bookId" placeholder="Enter the book ID">
                <br />

                <INPUT type="button" class="btn btn-dark" value="Enter" onclick="addFields()" />
                <br>

                <div id="container"></div>


            </FORM>
        </div>

    </BODY>

</HTML>
